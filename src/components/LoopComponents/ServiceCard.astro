---
// src/components/ServiceCard.astro
/**
 * Service Card Component
 * 
 * Card for displaying service with:
 * - Icon from Icon component (supports lu:, fa:, etc.)
 * - Title and description
 * - Clickable CTA button using Button component
 */

import Icon from '@/components/Icon';
import Button from '@/components/Button/Button';

interface Props {
    icon?: string;       // Icon name for Icon component (e.g., "lu:code", "fa:bullhorn")
    title: string;
    description: string;
    url?: string;
}

const { icon, title, description, url } = Astro.props;
const cardLink = url || "#";
const displayIcon = icon || "lu:shield"; // Default icon if none provided
const truncatedDescription = (() => {
  if (!description) return "";
  const maxLength = 140;
  return description.length > maxLength
    ? `${description.slice(0, maxLength).trimEnd()}...`
    : description;
})();
---

<div class="service-card group relative bg-gray-100 border border-gray-100 p-8 space-y-6 h-full flex flex-col justify-center transition-all duration-300 hover:bg-white hover:-translate-y-2.5 hover:shadow-xl">
    <!-- Top bar that slides in on hover -->
    <div class="absolute top-0 left-0 right-0 h-1 bg-black transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-300"></div>

    <!-- Icon -->
    <div class="w-16 h-16 bg-black rounded-md flex items-center justify-center">
        <Icon icon={displayIcon} className="w-8 h-8 text-white" />
    </div>

    <!-- Title -->
    <h3 class="text-2xl font-bold text-black">{title}</h3>

    <!-- Description -->
    <p class="text-gray-600 leading-relaxed">{truncatedDescription}</p>

    <!-- Learn More Link -->
    <a
        href={cardLink}
        class="inline-flex items-center gap-2 text-black font-medium hover:gap-3 transition-all duration-200"
        aria-label={`Learn more about ${title}`}
    >
        Learn More
        <Icon icon="lu:arrow-right" className="w-4 h-4" />
    </a>
</div>
