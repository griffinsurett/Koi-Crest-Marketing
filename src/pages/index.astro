---
// src/pages/index.astro
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { siteData } from "@/content/siteData";
import {
  query,
  whereArrayContains,
  whereEquals,
  sortByDate,
  sortByOrder,
  sortBy,
} from "@/utils/query";
import HeroVariant from "@/components/ContentRenderer/variants/HeroVariant.astro";
---

<BaseLayout title="Home" description={siteData.description}>
  <main class="flex-1">
    <!-- Hero ContentRenderer with static content -->
    <HeroVariant
      title="How do you measure the success of social media marketing campaigns?"
      description="We track key performance indicators (KPIs) such as engagement rates, reach, conversions, click-through rates, and ROI. We provide detailed analytics reports so you can see exactly how your campaigns are performing."
    />

    <!-- Services - auto-populates from services meta -->
    <ContentRenderer
      query={query("services").orderBy(sortByOrder())}
      variant="GridVariant"
      columns={3}
      gap="lg"
    />

    <!-- Portfolio with sorting -->
    <ContentRenderer
      query={query("projects")
        .orderBy(sortByDate("publishDate", "desc"))
        .limit(5)}
      variant="ListVariant"
    />

    <!-- Why Choose Us -->
    <ContentRenderer
      query={query("benefits").orderBy(sortByOrder())}
      variant="ListVariant"
    />

    <!-- Testimonials with rating filter -->
    <ContentRenderer
      query={query("testimonials").where((entry) => entry.data.rating >= 4)}
      variant="MasonryVariant"
    />

    <!-- FAQ ContentRenderer -->
    <ContentRenderer
      query={query("faq").orderBy(sortByOrder())}
      variant="AccordionVariant"
      allowMultiple={false}
    />

    <!-- Contact ContentRenderer -->
    <ContentRenderer
      query={query("contact-us")}
      variant="ContactVariant"
      columns={2}
    />
  </main>
</BaseLayout>
