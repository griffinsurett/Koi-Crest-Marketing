---
// src/layouts/collections/IndustriesLayout.astro
/**
 * Industries Layout - Landing Page Style for Industries
 *
 * Features:
 * - IndustryHero with title on top, heading below (centered, CTA to pricing)
 * - Two-column layout: MDX content (left) + child industries sidebar (right)
 * - Services, Pricing, Testimonials, Portfolio sections below
 * - CTA section at bottom linking to pricing
 */
import BaseLayout from "@/layouts/BaseLayout.astro";
import type { CollectionLayoutProps } from "./types";
import IndustryHero from "../IndustryHero.astro";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { query, sortByDate, sortByOrder } from "@/utils/query";
import { children, roots } from "@/utils/query/snippets";
import Button from "@/components/Button/Button";
import SectionHeader from "@/components/SectionHeader";

const {
  entry,
  collection,
  collectionMeta,
  Content,
  isIndexPage,
  seoProps = {},
  ...extraProps
} = Astro.props as CollectionLayoutProps;

const data = entry?.data || {};
---

<BaseLayout {...seoProps}>
  <main class="flex-1">
    {/* Hero section - text left, image right */}
    <IndustryHero
      title={data.title}
      heading={data.heading}
      description={data.description}
      image={data.featuredImage}
    />

    {/* Landing page content section: MDX with EditorialSection wrapper */}
    {Content && (
      <Content />
    )}

        {/* Pricing */}
    <ContentRenderer
      id="pricing"
      query={query("pricing").orderBy(sortByOrder())}
      variant="PricingVariant"
      columns={3}
      gap="lg"
    />

    {/* Services we offer for this industry */}
    <ContentRenderer
      query={roots("services")}
      variant="ServicesVariant"
      columns={3}
      gap="lg"
    />

    {/* projects and testimonials must remain but stay commented out due to the lack of these and will be reenabled at a later point
    <ContentRenderer
      query={query("testimonials")}
      variant="TestimonialsVariant"
    />
    <ContentRenderer
      query={query("projects").orderBy(sortByDate("publishDate", "desc"))}
      variant="PortfolioBoxVariant"
    />
    */}

    <!-- {FAQ Section} -->
     <ContentRenderer
      query={query("faq")}
      variant="AccordionVariant"
      />

    {/* CTA Section */}
    <section class="container mx-auto">
      <div class="container lg:my-20 py-10 lg:py-20 bg-MainDark text-white px-4 max-w-7xl">
        <div class="text-center flex flex-col gap-3">
          <SectionHeader
            subtitle="Let's Get Started"
            title="Ready To Grow Your Business?"
            titleTag="h2"
            subtitleClass="text-gray-400 h6 tracking-wider uppercase m-0"
            titleClass="h2 font-bold leading-tight m-0"
            align="center"
          />
          <p class="text-xl text-gray-300">See our transparent pricing and find the perfect plan for your business.</p>
          <div class="pt-6">
            <Button variant="secondary" href="#pricing">View Pricing</Button>
          </div>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>
