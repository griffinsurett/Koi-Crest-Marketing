---
// src/layouts/IndustryHero.astro
/**
 * Industry Hero - Split hero for industry pages
 * Features: Title (small) above heading (large), left-aligned text, image on right
 * Directs users to view pricing options
 */

import { Image } from "astro:assets";
import SectionHeader from "@/components/SectionHeader";
import Button from "@/components/Button/Button";
import placeholderImage from "@/assets/placeholder.svg";
import {
  normalizeCollectionImage,
  type CollectionImage,
  type NormalizedImage,
} from "@/utils/images";

interface Props {
  title?: string;
  heading?: string;
  description?: string;
  className?: string;
  ctaText?: string;
  ctaLink?: string;
  image?: CollectionImage;
  imageAlt?: string;
}

const {
  title,
  heading,
  description,
  className = "",
  ctaText = "View Our Pricing",
  ctaLink = "#pricing",
  image,
  imageAlt,
} = Astro.props;

// Use title as subtitle (small text on top), heading as main title (large text)
const displaySubtitle = `Marketing for ${title}`;
const displayTitle = heading || `Marketing for ${title}`;

// Normalize the image
const fallbackAlt = imageAlt ?? `${title} marketing services`;
const normalizedImage: NormalizedImage | undefined = normalizeCollectionImage(
  image as CollectionImage,
  fallbackAlt
);

const heroImage =
  normalizedImage ??
  ({
    type: "asset",
    src: placeholderImage,
    alt: fallbackAlt,
  } as NormalizedImage);
---

<section class={`min-h-[60vh] flex items-center w-full bg-gray-50 ${className}`}>
  <div class="container mx-auto px-4 py-20 max-w-7xl">
    <div class="flex flex-col lg:flex-row items-center gap-12">
      <!-- Left Column - Text Content -->
      <div class="lg:w-1/2 flex flex-col items-start text-left gap-6">
        <!-- Header with title on top, heading below -->
        <SectionHeader
          subtitle={displaySubtitle}
          title={displayTitle}
          titleTag="h1"
          subtitleClass="text-gray-400 font-semibold h6 m-0 p-0 uppercase tracking-wider"
          titleClass="h1 text-primary m-0"
          align="left"
        />

        <!-- Description -->
        {description && (
          <p class="text-gray-500 text-xl main-text leading-relaxed p-0 m-0">
            {description}
          </p>
        )}

        <!-- CTA Button -->
        <div class="pt-4">
          <Button href={ctaLink} variant="primary" size="lg">
            {ctaText}
          </Button>
        </div>
      </div>

      <!-- Right Column - Image -->
      <div class="lg:w-1/2">
        <div class="relative overflow-hidden rounded-lg shadow-xl">
          {
            heroImage.type === "asset" ? (
              <Image
                src={heroImage.src}
                alt={heroImage.alt}
                class="w-full h-auto object-cover"
              />
            ) : (
              <img
                src={heroImage.src}
                alt={heroImage.alt}
                class="w-full h-auto object-cover"
                loading="eager"
              />
            )
          }
        </div>
      </div>
    </div>
  </div>
</section>
