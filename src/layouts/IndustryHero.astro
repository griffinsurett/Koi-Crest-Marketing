---
// src/layouts/IndustryHero.astro
/**
 * Industry Hero - Split hero for industry pages
 * Features: Title (small) above heading (large), left-aligned text, image on right
 * Directs users to view pricing options
 */

import { Image } from "astro:assets";
import SectionHeader from "@/components/SectionHeader";
import Button from "@/components/Button/Button";
import placeholderImage from "@/assets/placeholder.svg";
import {
  normalizeCollectionImage,
  type CollectionImage,
  type NormalizedImage,
} from "@/utils/images";
import StarRating from "@/components/StarRating.astro";
import Counter from "@/components/Counter";

interface Props {
  title?: string;
  heading?: string;
  description?: string;
  className?: string;
  ctaText?: string;
  ctaLink?: string;
  stats?: {
    rating?: string;
    customers?: string;
  };
  image?: CollectionImage;
  imageAlt?: string;
}

const {
  title,
  heading,
  description,
  className = "",
  ctaText = "View Our Pricing",
  ctaLink = "#pricing",
  stats = { rating: "5/5", customers: "64" },
  image,
  imageAlt,
} = Astro.props;

// Use title as subtitle (small text on top), heading as main title (large text)
const displaySubtitle = `Marketing for ${title}`;
const displayTitle = heading || `Marketing for ${title}`;

// Normalize the image
const fallbackAlt = imageAlt ?? `${title} marketing services`;
const normalizedImage: NormalizedImage | undefined = normalizeCollectionImage(
  image as CollectionImage,
  fallbackAlt,
);

const heroImage =
  normalizedImage ??
  ({
    type: "asset",
    src: placeholderImage,
    alt: fallbackAlt,
  } as NormalizedImage);
---

<section
  class={`min-h-[60vh] flex items-center w-full bg-gray-50 ${className}`}
>
  <div class="container mx-auto px-4 py-20 max-w-7xl">
    <div class="flex flex-col lg:flex-row items-center gap-12">
      <!-- Left Column - Text Content -->
      <div class="lg:w-1/2 flex flex-col items-start text-left gap-6">
        <!-- Header with title on top, heading below -->
        <SectionHeader
          subtitle={displaySubtitle}
          title={displayTitle}
          titleTag="h1"
          subtitleClass="text-gray-400 font-semibold h6 m-0 p-0 uppercase tracking-wider"
          titleClass="h1 text-primary m-0"
          align="left"
        />

        <!-- Description -->
        {
          description && (
            <p class="text-gray-500 text-xl main-text leading-relaxed p-0 m-0">
              {description}
            </p>
          )
        }

        <!-- CTA Button -->
        <div class="pt-4">
          <Button href={ctaLink} variant="primary" size="lg">
            {ctaText}
          </Button>
          <!-- <div class="flex items-center space-x-12 pt-4">
            <div class="flex flex-col gap-2 items-start space-x-3">
              <div class="flex items-end gap-2">
                <div class="text-4xl font-bold">{stats.rating}</div>
                <div class="text-sm text-gray-600">rated</div>
              </div>
              <StarRating />
            </div>
            <div class="flex items-center space-x-3">
              <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.85-1.26l3.03-7.08c.09-.23.12-.47.12-.66v-2z"
                ></path>
              </svg>
              <div>
                <Counter
                  start={0}
                  end={64}
                  duration={2}
                  className="h2 font-bold text-black"
                  client:load
                />

                <div class="small-text text-gray-600">Happy customers</div>
              </div>
            </div>
          </div> -->
        </div>
      </div>

      <!-- Right Column - Image -->
      <div class="lg:w-1/2">
        <div class="relative overflow-hidden rounded-lg shadow-xl">
          {
            heroImage.type === "asset" ? (
              <Image
                src={heroImage.src}
                alt={heroImage.alt}
                class="w-full h-auto object-cover"
              />
            ) : (
              <img
                src={heroImage.src}
                alt={heroImage.alt}
                class="w-full h-auto object-cover"
                loading="eager"
              />
            )
          }
        </div>
      </div>
    </div>
  </div>
</section>
