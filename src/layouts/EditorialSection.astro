---
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { children } from "@/utils/query/snippets";

interface Props {
  slug: string;
  collection?: "industries" | "services";
  heading?: string;
}

const {
  slug,
  collection = "industries",
  heading
} = Astro.props;

// Default heading based on collection type
const sidebarHeading = heading || (collection === "services" ? "Related Services" : "Specialized Services");
---

<section class="py-16 bg-white">
  <div class="container mx-auto px-4">
    <div class="flex flex-col lg:flex-row gap-12 max-w-7xl mx-auto">
      {/* Main content - MDX with convincing copy */}
      <article class="lg:w-2/3 prose prose-lg max-w-none">
        <slot />
      </article>

      {/* Sidebar - Child items list */}
      <aside class="lg:w-1/3">
        <div class="lg:sticky lg:top-8">
          <ContentRenderer
            query={children(collection, slug)}
            variant="EditorialVariant"
            heading={sidebarHeading}
          />
        </div>
      </aside>
    </div>
  </div>
</section>