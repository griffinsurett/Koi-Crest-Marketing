---
// src/layouts/Footer.astro
/**
 * Site Footer - Updated with orientation="vertical"
 *
 * Features:
 * - bg-gray-50 background
 * - Logo and company info
 * - Footer menu using ContentRenderer with vertical orientation
 * - Social media links
 * - Copyright and legal links (no duplicates)
 * - Preference buttons (Cookie, Accessibility)
 */
import { siteData } from "@/content/siteData";
import { Image } from "astro:assets";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { query, sortBy, whereNoParent } from "@/utils/query";
import CookiePreferencesButton from "@/components/preferences/consent/CookiePreferencesButton";
// import AccessibilityButton from "@/components/preferences/accessibility/AccessibilityButton";
import Logo from "@/components/Logo.astro";
import { roots } from "@/utils/query/snippets";
---

<footer class="bg-gray-50 border-t border-gray-200 mt-auto">
  <div class="container mx-auto px-4 max-w-7xl">
    <!-- Main Footer Content -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-8 py-12">
      <!-- Column 1: Logo & Company Info -->
      <div class="space-y-4">
        <Logo
          size="default"
          linkClassName="items-start justify-center"
          textContainerClassName="hidden flex-col text-center py-2 gap-2"
        />
        <p class="text-gray-600 text-sm text-left leading-relaxed">
          {siteData.description}
        </p>
      </div>

      <!-- Column 2: Services - VERTICAL LIST -->
      <div>
        <ContentRenderer
          query={roots("services")}
          variant="ListVariant"
          orientation="vertical"
          className="py-0"
          title="Our Services"
        />
      </div>

      <!-- Column 3: Industries - VERTICAL LIST -->
      <div>
        <ContentRenderer
          query={roots("industries")}
          variant="ListVariant"
          orientation="vertical"
          className="py-0"
          title="Industries"
        />
      </div>

      <!-- Column 2: Quick Links (Footer Menu) - VERTICAL LIST -->
      <div class="space-y-6">
        <ContentRenderer
          query={query("menu-items")
            .where((entry) => {
              const menus = entry.data.menu;
              if (Array.isArray(menus)) {
                return menus.some((m) => m.id === "footer-menu");
              }
              return menus?.id === "footer-menu";
            })
            .orderBy(sortBy("order", "asc"))}
          variant="ListVariant"
          orientation="vertical"
          className="py-0"
          title="Legal Links"
        />
        <div>
          <h3 class="text-gray-900 font-bold text-lg uppercase mb-4">
            Change Preferences
          </h3>
          <div>
            <div class="flex flex-col items-start gap-4 text-base">
              <!-- Preference Buttons -->
              <CookiePreferencesButton client:visible />
              <!-- <AccessibilityButton client:idle /> -->
            </div>
            <!-- Preference Buttons & Legal Links -->
          </div>
        </div>
      </div>

      <!-- Column 3: Contact Info -->
      <ContentRenderer
        query={query("contact-us")}
        variant="ListVariant"
        orientation="vertical"
        className="py-0"
        title="Contact Us"
      />
    </div>

    <!-- Bottom Bar -->
    <div
      class="border-t border-gray-200 flex justify-center items-center flex-wrap py-6"
    >
      <div class="flex flex-col md:flex-row justify-center items-center">
        <!-- Copyright -->
        <p class="text-gray-500 text-sm">
          &copy; {new Date().getFullYear()}
          {siteData.legalName}. All rights reserved.
        </p>
      </div>
      <!-- Column 4: Social Media -->
      <!-- <ContentRenderer
          query={query("social-media")}
          variant="SocialMediaVariant"
          size="md"
          alignment="left"
        /> -->
    </div>
  </div>
</footer>
